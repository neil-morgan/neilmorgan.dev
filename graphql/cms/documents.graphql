fragment PostContent on Post {
  sys {
    id
  }
  title
  description
  date
  slug
  category {
    title
    slug
  }
  body {
    json
    links {
      entries {
        inline {
          sys {
            id
          }
          __typename
          ... on Post {
            title
            slug
          }
        }
        block {
          sys {
            id
          }
          __typename
          ... on Snippet {
            description
            language
            code
          }
        }
      }
      assets {
        block {
          sys {
            id
          }
          url
          description
        }
      }
    }
  }
}

query PostBySlug($slug: String!) {
  postCollection(where: { slug: $slug }, limit: 1) {
    items {
      ...PostContent
    }
  }
}

query PostsByCategory($slug: String!) {
  postCollection(where: { category: { slug_contains: $slug } }) {
    items {
      title
      description
      date
      slug
      category {
        title
        slug
      }
    }
  }
}

query AllPosts {
  postCollection(order: date_DESC, limit: 10) {
    items {
      sys {
        id
      }
      title
      description
      date
      slug
      category {
        title
        slug
      }
    }
  }
}

query AllPostsSlugs {
  postCollection(where: { slug_exists: true }) {
    items {
      slug
      category {
        title
        slug
      }
    }
  }
}
